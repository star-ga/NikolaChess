# NikolaChess - MIND Project Configuration
# Copyright (c) 2026 STARGA, Inc. All rights reserved.
#
# MIND Compiler: https://mindlang.dev | https://github.com/star-ga/mind

[package]
name = "nikolachess"
version = "3.20.0"
authors = ["STARGA, Inc. <info@star.ga>"]
description = "Supercomputer Chess Engine - 100% MIND"
license = "Apache-2.0"
repository = "https://github.com/star-ga/NikolaChess"
homepage = "https://star.ga"

[build]
entry = "src/main.mind"
output = "nikola"
optimization = "aggressive"

[features]
default = ["simd", "syzygy"]
cuda = []
rocm = []
metal = []
webgpu = []
simd = []
syzygy = []
lichess = []

# ============================================================================
# CPU Targets
# ============================================================================

[targets.cpu]
backend = "cpu"
simd = "avx512"
output = "nikola-cpu"

[targets.cpu-avx2]
backend = "cpu"
simd = "avx2"
output = "nikola-cpu-avx2"

# ============================================================================
# NVIDIA CUDA Targets
# ============================================================================

[targets.cuda]
backend = "cuda"
compute = "sm_89"  # RTX 40 series, Ada Lovelace
output = "nikola-cuda"

[targets.cuda-ampere]
backend = "cuda"
compute = "sm_86"  # RTX 30 series, A100
output = "nikola-cuda-ampere"

[targets.cuda-hopper]
backend = "cuda"
compute = "sm_90"  # H100
output = "nikola-cuda-hopper"

[targets.cuda-blackwell]
backend = "cuda"
compute = "sm_100"  # Blackwell B200/B300
output = "nikola-cuda-blackwell"

# ============================================================================
# AMD ROCm Targets
# ============================================================================

[targets.rocm]
backend = "rocm"
arch = "gfx1100"  # RX 7900 series, RDNA3
output = "nikola-rocm"

[targets.rocm-mi300]
backend = "rocm"
arch = "gfx942"  # MI300X
output = "nikola-rocm-mi300"

# ============================================================================
# Apple Metal Targets
# ============================================================================

[targets.metal]
backend = "metal"
arch = "apple-m3"
output = "nikola-metal"

[targets.metal-m4]
backend = "metal"
arch = "apple-m4"
output = "nikola-metal-m4"

# ============================================================================
# WebGPU Target (Browser / Cross-platform)
# ============================================================================

[targets.webgpu]
backend = "webgpu"
output = "nikola-webgpu"

[dependencies]
# MIND Runtime provides GPU backends (CUDA, ROCm, Metal, WebGPU)
# Runtime source is proprietary - distributed as compiled library
runtime = { version = "1.0", features = ["tensor", "cuda", "rocm", "metal", "webgpu"] }

[profile.release]
opt-level = 3
lto = true
codegen-units = 1

[profile.dev]
opt-level = 0
debug = true
